
---
name: Amazon EC2
group: Cloud
version: 1.0
description: |
     Amazon EC2

hosts: all

addTitle: 'NEW Amazon EC2'
editTitle: '{{ name }}'
name: 'amazon_ec2'
title: 'Amazon EC2'
basePath: 'ipam_providers'
stateTree: 'infraProviders'
breadcrumbName: 'INFRA PROVIDER'
showActions: true
launchclick: 'addNew("amazon_ec2")'
steps: 4

wizards: 
    basic: 
      index: 1
      name: 'Variable'
      type: 'collection'
      title: 'Variable'

    relation: 
      index: 2
      name: 'Relation'
      type: 'collection'
      title: Relation


    inventory:
      index: 3
      name: 'Inventory'
      type: 'collection'
      title: Inventory

    opts:
      index: 4
      name: 'Option'
      type: 'collection'
      title: 'Option'


fields:
  name: 
      label: 'Name'
      type: 'text'
      ngDisabled: '!(user_obj.summary_fields.user_capabilities.edit || canAdd)'
      required: true
      ngShow: 'tabId == 1'

  description: 
    label: Description
    type: 'text'
    ngDisabled: '!(user_obj.summary_fields.user_capabilities.edit || canAdd)'
    ngShow: 'tabId == 1'

  token:
    label: 'Token'
    type: 'text'
    ngDisabled: '!(user_obj.summary_fields.user_capabilities.edit || canAdd)'
    ngShow: 'tabId == 1'

  datacenter: 
    label: 'Datacenter'
    type: 'select'
    defaultText: 'Choose a Datacenter'
    ngModel: 'datacenter'
    ngOptions: 'item as item.label for item in datacenter_type_options'
    ngDisabled: '!(user_obj.summary_fields.user_capabilities.edit || canAdd)'
    ngShow: 'tabId == 2'

  credential: 
    label: Credential
    type: 'select'
    defaultText: 'Choose a Credential'
    ngModel: 'credential'
    ngOptions: 'item as item.label for item in credential_type_options'
    ngDisabled: '!(user_obj.summary_fields.user_capabilities.edit || canAdd)'
    ngShow: 'tabId == 2'

  organization:
    label: 'Organization'
    type: 'lookup'
    list: 'OrganizationList'
    sourceModel: 'organization'
    basePath: 'organizations'
    sourceField: 'name'
    dataTitle: 'Organization'
    dataContainer: 'body'
    dataPlacement: 'right'
    ngShow: 'tabId == 2'

  instance_groups:
    label: 'Instance Groups'
    type: 'custom'
    awPopOver: "<p> Select the Instance Groups for this Inventory to run on. </p>"
    dataTitle: 'Instance Groups'
    dataPlacement: 'right'
    dataContainer: 'body'
    control: '<instance-groups-multiselect instance-groups="instance_groups" field-is-disabled="!(inventory_obj.summary_fields.user_capabilities.edit || canAdd)"></instance-groups-multiselect>'
    ngShow: 'tabId == 2'

  inventory_host:
     label: 'Inventory Host Single Select'
     type: 'lookup'
     list: 'InventoryList'
     sourceModel: 'host'
     basePath: 'hosts'
     sourceField: 'name'
     dataTitle: 'Inventory'
     dataContainer: 'body'
     dataPlacement: 'right'
     ngShow: 'tabId == 3'

  inventory_hosts:
     label: 'Inventory Host'
     type: 'custom'
     sourceModel: 'hosts'
     basePath: 'hosts'
     awPopOver: "<p> Select the Inventory Hosts for this Inventory to run on. </p>"
     dataTitle: 'Inventory Host'
     dataPlacement: 'right'
     dataContainer: 'body'
     control: '<inventory-hosts-multiselect  bind="inventory_hosts"></inventory-hosts-multiselect>'
     ngShow: 'tabId == 3'

  opts: 
    label: Input Opts'
    class: 'Form-textAreaLabel Form-formGroup--fullWidth'
    type: 'textarea'
    rows: 15
    default: '---'
    showParseTypeToggle: true
    parseTypeName: 'parseTypeOpts'
    awPopOverWatch: "opts_help_text"
    dataTitle: 'Input Opts'
    dataPlacement: 'right'
    dataContainer: "body"
    ngDisabled: '!(user_obj.summary_fields.user_capabilities.edit || canAdd)'
    ngShow: 'tabId == 4'

buttons: 
  wizardcancel:
    ngClick: 'formCancel()'
    ngShow: 'tabId == 1'

  previous:
    ngClick: 'WizardClick(1)'
    ngShow: 'tabId > 1'

  next:
    ngClick: 'WizardClick(2)'
    ngShow: 'tabId < 4'

  save:
    title: 'Finish'
    ngClick: 'formSave()'
    ngShow: 'tabId == 4'
    ngDisabled: true
